{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "dictionary.schema.json",
  "title": "Dictionary",
  "description": "Configuration schema for custom fields and formula settings across meta, campaign, and line item levels",
  "type": "object",
  "properties": {
    "meta_custom_dimensions": {
      "type": "object",
      "description": "Configuration for meta-level custom dimension fields (dim_custom1-5)",
      "properties": {
        "dim_custom1": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom2": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom3": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom4": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom5": { "$ref": "#/$defs/custom_field_config" }
      },
      "additionalProperties": false
    },
    "campaign_custom_dimensions": {
      "type": "object",
      "description": "Configuration for campaign-level custom dimension fields (dim_custom1-5)",
      "properties": {
        "dim_custom1": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom2": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom3": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom4": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom5": { "$ref": "#/$defs/custom_field_config" }
      },
      "additionalProperties": false
    },
    "lineitem_custom_dimensions": {
      "type": "object",
      "description": "Configuration for line item-level custom dimension fields (dim_custom1-10)",
      "properties": {
        "dim_custom1": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom2": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom3": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom4": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom5": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom6": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom7": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom8": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom9": { "$ref": "#/$defs/custom_field_config" },
        "dim_custom10": { "$ref": "#/$defs/custom_field_config" }
      },
      "additionalProperties": false
    },
    "standard_metrics": {
      "type": "object",
      "description": "Formula configuration for standard metrics that support formula-based calculations. Only metrics that can use formulas are included in this dictionary.",
      "properties": {
        "metric_impressions": { "$ref": "#/$defs/metric_formula_config" },
        "metric_clicks": { "$ref": "#/$defs/metric_formula_config" },
        "metric_views": { "$ref": "#/$defs/metric_formula_config" },
        "metric_view_starts": { "$ref": "#/$defs/metric_formula_config" },
        "metric_view_completions": { "$ref": "#/$defs/metric_formula_config" },
        "metric_reach": { "$ref": "#/$defs/metric_formula_config" },
        "metric_units": { "$ref": "#/$defs/metric_formula_config" },
        "metric_impression_share": { "$ref": "#/$defs/metric_formula_config" },
        "metric_engagements": { "$ref": "#/$defs/metric_formula_config" },
        "metric_followers": { "$ref": "#/$defs/metric_formula_config" },
        "metric_visits": { "$ref": "#/$defs/metric_formula_config" },
        "metric_leads": { "$ref": "#/$defs/metric_formula_config" },
        "metric_sales": { "$ref": "#/$defs/metric_formula_config" },
        "metric_add_to_cart": { "$ref": "#/$defs/metric_formula_config" },
        "metric_app_install": { "$ref": "#/$defs/metric_formula_config" },
        "metric_application_start": { "$ref": "#/$defs/metric_formula_config" },
        "metric_application_complete": { "$ref": "#/$defs/metric_formula_config" },
        "metric_contact_us": { "$ref": "#/$defs/metric_formula_config" },
        "metric_download": { "$ref": "#/$defs/metric_formula_config" },
        "metric_signup": { "$ref": "#/$defs/metric_formula_config" },
        "metric_page_views": { "$ref": "#/$defs/metric_formula_config" },
        "metric_likes": { "$ref": "#/$defs/metric_formula_config" },
        "metric_shares": { "$ref": "#/$defs/metric_formula_config" },
        "metric_comments": { "$ref": "#/$defs/metric_formula_config" },
        "metric_conversions": { "$ref": "#/$defs/metric_formula_config" }
      },
      "additionalProperties": false
    },
    "custom_metrics": {
      "type": "object",
      "description": "Configuration for custom metric fields (metric_custom1-10) including formula support",
      "properties": {
        "metric_custom1": { "$ref": "#/$defs/custom_metric_config" },
        "metric_custom2": { "$ref": "#/$defs/custom_metric_config" },
        "metric_custom3": { "$ref": "#/$defs/custom_metric_config" },
        "metric_custom4": { "$ref": "#/$defs/custom_metric_config" },
        "metric_custom5": { "$ref": "#/$defs/custom_metric_config" },
        "metric_custom6": { "$ref": "#/$defs/custom_metric_config" },
        "metric_custom7": { "$ref": "#/$defs/custom_metric_config" },
        "metric_custom8": { "$ref": "#/$defs/custom_metric_config" },
        "metric_custom9": { "$ref": "#/$defs/custom_metric_config" },
        "metric_custom10": { "$ref": "#/$defs/custom_metric_config" }
      },
      "additionalProperties": false
    },
    "custom_costs": {
      "type": "object",
      "description": "Configuration for custom cost fields (cost_custom1-10)",
      "properties": {
        "cost_custom1": { "$ref": "#/$defs/custom_field_config" },
        "cost_custom2": { "$ref": "#/$defs/custom_field_config" },
        "cost_custom3": { "$ref": "#/$defs/custom_field_config" },
        "cost_custom4": { "$ref": "#/$defs/custom_field_config" },
        "cost_custom5": { "$ref": "#/$defs/custom_field_config" },
        "cost_custom6": { "$ref": "#/$defs/custom_field_config" },
        "cost_custom7": { "$ref": "#/$defs/custom_field_config" },
        "cost_custom8": { "$ref": "#/$defs/custom_field_config" },
        "cost_custom9": { "$ref": "#/$defs/custom_field_config" },
        "cost_custom10": { "$ref": "#/$defs/custom_field_config" }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false,
  "$defs": {
    "custom_field_config": {
      "type": "object",
      "description": "Configuration for a single custom field",
      "required": ["status"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["enabled", "disabled"],
          "description": "Whether this custom field is enabled or disabled"
        },
        "caption": {
          "type": "string",
          "maxLength": 100,
          "description": "Display caption for this custom field (required when status is enabled, optional when disabled)"
        }
      },
      "if": {
        "properties": {
          "status": { "const": "enabled" }
        }
      },
      "then": {
        "required": ["caption"],
        "properties": {
          "caption": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Display caption for this custom field (must be non-empty when enabled)"
          }
        }
      },
      "else": {
        "properties": {
          "caption": {
            "type": "string",
            "maxLength": 100,
            "description": "Display caption for this custom field (optional when disabled, can be empty)"
          }
        }
      },
      "additionalProperties": false
    },
    "metric_formula_config": {
      "type": "object",
      "description": "Formula configuration for a metric that supports formula-based calculations",
      "properties": {
        "formula_type": {
          "type": "string",
          "description": "Type of formula function. Common types include: 'cost_per_unit' (linear division), 'conversion_rate' (linear multiplication), 'constant' (fixed value), 'power_function' (power function). Applications may support additional formula types. Must be consistent across all line items for this metric."
        },
        "base_metric": {
          "type": "string",
          "description": "The metric or cost field used as input for the formula calculation (e.g., cost_total, cost_media, metric_impressions, metric_clicks). Must be a valid metric or cost field name from the lineitem schema. The appropriate base metric depends on the formula type and the metric being calculated. Must be consistent across all line items for this metric."
        }
      },
      "additionalProperties": false
    },
    "custom_metric_config": {
      "type": "object",
      "description": "Configuration for a custom metric field including status, caption, and optional formula support",
      "required": ["status"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["enabled", "disabled"],
          "description": "Whether this custom metric field is enabled or disabled"
        },
        "caption": {
          "type": "string",
          "maxLength": 100,
          "description": "Display caption for this custom metric (required when status is enabled, optional when disabled)"
        },
        "formula_type": {
          "type": "string",
          "description": "Type of formula function. Common types include: 'cost_per_unit' (linear division), 'conversion_rate' (linear multiplication), 'constant' (fixed value), 'power_function' (power function). Applications may support additional formula types. Must be consistent across all line items for this metric."
        },
        "base_metric": {
          "type": "string",
          "description": "The metric or cost field used as input for the formula calculation (e.g., cost_total, cost_media, metric_impressions, metric_clicks). Must be a valid metric or cost field name from the lineitem schema. The appropriate base metric depends on the formula type and the metric being calculated. Must be consistent across all line items for this metric."
        }
      },
      "if": {
        "properties": {
          "status": { "const": "enabled" }
        }
      },
      "then": {
        "required": ["caption"],
        "properties": {
          "caption": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "description": "Display caption for this custom metric (must be non-empty when enabled)"
          }
        }
      },
      "else": {
        "properties": {
          "caption": {
            "type": "string",
            "maxLength": 100,
            "description": "Display caption for this custom metric (optional when disabled, can be empty)"
          }
        }
      },
      "additionalProperties": false
    }
  }
}
